// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(uuid())
  email         String   @unique
  password      String
  
  // Make these OPTIONAL by adding '?'
  fullName      String?
  role          String   @default("PLAYER") 
  
  // Cricketer Details (All Optional for now)
  age           Int?
  playerRole    String?
  battingStyle  String?
  bowlingStyle  String?
  
  // Stats (Default to 0 is fine)
  matches       Int      @default(0)
  runs          Int      @default(0)
  wickets       Int      @default(0)
  
  teamId        String?
  team          Team?    @relation(fields: [teamId], references: [id])
  createdAt     DateTime @default(now())
}

// ... Keep Team, Player, and Auction models same as before
model Team {
  id            String   @id @default(uuid())
  name          String
  purseBalance  Float    @default(50000000)
  logoUrl       String?
  accessCode    String   @unique // NEW: Secret code for team login
  auctionId     String?  // NEW: Link to auction
  auction       Auction? @relation(fields: [auctionId], references: [id])
  owner         User[]
  players       Player[]
}

model Player {
  id            String   @id @default(uuid())
  name          String
  category      String
  basePrice     Float
  soldPrice     Float?
  isSold        Boolean  @default(false)
  teamId        String?
  team          Team?    @relation(fields: [teamId], references: [id])
}

model Auction {
  id          String   @id @default(uuid()) // This is the "League ID"
  name        String
  budget      Float
  status      String   @default("PENDING") // PENDING, SETUP, LIVE, COMPLETED
  passcode    String   // Admin Passcode
  
  // NEW FIELDS
  theme       String?
  eventDate   DateTime?
  teams       Team[]
  
  createdAt   DateTime @default(now())
}
// ... existing User model ...



// ... existing Player model ...


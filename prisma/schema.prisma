// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(uuid())
  email         String   @unique
  password      String
  
  // Make these OPTIONAL by adding '?'
  fullName      String?
  role          String   @default("PLAYER") 
  
  // Cricketer Details (All Optional for now)
  age           Int?
  playerRole    String?
  battingStyle  String?
  bowlingStyle  String?
  
  // Stats (Default to 0 is fine)
  matches       Int      @default(0)
  runs          Int      @default(0)
  wickets       Int      @default(0)
  
  teamId        String?
  team          Team?    @relation(fields: [teamId], references: [id])
  createdAt     DateTime @default(now())
}

// ... Keep Team, Player, and Auction models same as before
model Team {
  id           String   @id @default(uuid())
  name         String
  purseBalance Float    @default(50000000)
  logoUrl      String?
  accessCode   String   @unique
  
  // --- NEW FIELD ---
  themeColor   String?  @default("#E62E2E") // Default to Brand Red
  // -----------------

  auctionId    String?
  auction      Auction? @relation(fields: [auctionId], references: [id])
  owner        User[]
  players      Player[]
}
// prisma/schema.prisma

// ... User & Team models ...



model Auction {
  id          String   @id @default(uuid())
  name        String
  logoUrl     String?
  budget      Float
  status      String   @default("PENDING")
  passcode    String
  theme       String?
  ground      String?
  bidIncrement String? @default("Dynamic")
  eventDate   DateTime?
  
  // NEW: Stores the state of the FluxDivide animation (JSON String)
  fluxData    String?  @default("{}") 

  teams       Team[]
  players     Player[]
  createdAt   DateTime @default(now())
}
// prisma/schema.prisma

model Player {
  id            String   @id @default(uuid())
  name          String
  category      String
  basePrice     Float
  soldPrice     Float?
  isSold        Boolean  @default(false)
  
  // NEW: Order for auction sequence
  order         Int      @default(0) 

  teamId        String?
  team          Team?    @relation(fields: [teamId], references: [id])
  auctionId     String?
  auction       Auction? @relation(fields: [auctionId], references: [id])
}


// ... User and Team models remain the same



// ... existing Player model ...

